<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Uygulaması</title>
    
    <!-- Bootstrap Grid CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/plugins/bootstrap-grid.css') }}">
    
    <!-- Quiz CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/quiz/quiz.css') }}">
    
    <!-- GSAP Animation Library from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <!-- Canvas Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        /* Çarpı işareti animasyonu */
        .wrong-answer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 0, 0, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            pointer-events: none;
        }
        
        .wrong-symbol {
            font-size: 15rem;
            color: #FF0000;
            text-shadow: 
                0 0 20px #FF0000,
                0 0 40px #FF0000,
                0 0 60px #FF0000;
            animation: wrongPulse 2s ease-in-out;
        }
        
        @keyframes wrongPulse {
            0% { 
                transform: scale(0) rotate(0deg); 
                opacity: 0;
            }
            20% { 
                transform: scale(1.5) rotate(90deg); 
                opacity: 1;
            }
            40% { 
                transform: scale(1.2) rotate(180deg); 
                opacity: 1;
            }
            60% { 
                transform: scale(1.4) rotate(270deg); 
                opacity: 1;
            }
            80% { 
                transform: scale(1.1) rotate(320deg); 
                opacity: 1;
            }
            100% { 
                transform: scale(1) rotate(360deg); 
                opacity: 0;
            }
        }
        
        /* Doğru cevap için yeşil overlay */
        .correct-answer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 255, 0, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            pointer-events: none;
        }
        
        .correct-symbol {
            font-size: 15rem;
            color: #00FF00;
            text-shadow: 
                0 0 20px #00FF00,
                0 0 40px #00FF00,
                0 0 60px #00FF00;
            animation: correctPulse 2.5s ease-in-out;
        }
        
        @keyframes correctPulse {
            0% { 
                transform: scale(0) rotate(0deg); 
                opacity: 0;
            }
            15% { 
                transform: scale(1.8) rotate(45deg); 
                opacity: 1;
            }
            30% { 
                transform: scale(1.3) rotate(90deg); 
                opacity: 1;
            }
            45% { 
                transform: scale(1.6) rotate(135deg); 
                opacity: 1;
            }
            60% { 
                transform: scale(1.2) rotate(180deg); 
                opacity: 1;
            }
            75% { 
                transform: scale(1.5) rotate(225deg); 
                opacity: 1;
            }
            90% { 
                transform: scale(1.1) rotate(270deg); 
                opacity: 1;
            }
            100% { 
                transform: scale(1) rotate(360deg); 
                opacity: 0;
            }
        }
        
        /* Konfeti efekti için ek animasyonlar */
        .confetti-burst {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, transparent 30%, rgba(255, 215, 0, 0.8) 70%);
            border-radius: 50%;
            animation: confettiBurst 3s ease-out;
            pointer-events: none;
            z-index: 9998;
        }
        
        @keyframes confettiBurst {
            0% { 
                transform: translate(-50%, -50%) scale(0);
                opacity: 1;
            }
            50% { 
                transform: translate(-50%, -50%) scale(3);
                opacity: 0.8;
            }
            100% { 
                transform: translate(-50%, -50%) scale(5);
                opacity: 0;
            }
        }
        
        /* Başarı efekti için yıldızlar */
        .success-stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9997;
        }
        
        .success-star {
            position: absolute;
            font-size: 2rem;
            color: #FFD700;
            animation: starFloat 4s ease-out infinite;
        }
        
        @keyframes starFloat {
            0% { 
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            20% { 
                opacity: 1;
            }
            80% { 
                opacity: 1;
            }
            100% { 
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Main Quiz Container -->
    <div class="quiz-container">
        <div class="quiz-wrapper">
            
            <!-- Quiz Header Container -->
            <div class="quiz-header-container">
                <div class="quiz-header">
                    <div class="quiz-header-content">
                        <h1 class="quiz-title">Quiz Uygulaması</h1>
                        <p class="quiz-subtitle">Bilgilerinizi test edin</p>
                        <div class="quiz-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quiz Content Layout -->
            <div class="quiz-content">
                
                <!-- Left Side - Quiz Questions -->
                <div class="quiz-left">
                    
                    <!-- Quiz Question Container -->
                    <div class="quiz-question-container">
                        <div class="quiz-question">
                            <div class="question-number">Soru 1</div>
                            <div class="question-text">Quiz yükleniyor...</div>
                            <div class="question-image-container"></div>
                        </div>
                    </div>

                    <!-- Quiz Options Container -->
                    <div class="quiz-options-container">
                        <div class="quiz-options">
                            <div class="option-item">
                                <div class="option-label">
                                    <span class="option-letter">A</span>
                                    <span class="option-text">Seçenekler yükleniyor...</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quiz Controls Container -->
                    <div class="quiz-controls-container">
                        <div class="quiz-controls">
                            <div class="quiz-nav">
                                <button class="quiz-nav-btn" id="prevBtn" disabled>‹</button>
                                <span class="quiz-nav-info">1 / 10</span>
                                <button class="quiz-nav-btn" id="nextBtn">›</button>
                            </div>
                            <div class="quiz-actions">
                                <button class="quiz-btn btn-secondary" id="skipBtn">Atla</button>
                                <button class="quiz-btn btn-primary" id="submitBtn">Cevapla</button>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- Right Side - AI Chat -->
                <div class="quiz-right">
                    <div class="ai-chat-window">
                        <div class="ai-chat-header realistic-cat-header">
                            <div class="realistic-cat-container">
                                <!-- Sarman, hareketli kedi SVG -->
                                <svg class="sarman-cat" viewBox="0 0 140 120" width="110" height="100" xmlns="http://www.w3.org/2000/svg">
                                    <!-- Kuyruk (animasyonlu) -->
                                    <ellipse class="sarman-tail" cx="120" cy="100" rx="18" ry="6" fill="#f6a04d" stroke="#e38b3c" stroke-width="3"/>
                                    <!-- Gövde -->
                                    <ellipse cx="70" cy="90" rx="40" ry="28" fill="#f6a04d" stroke="#e38b3c" stroke-width="3"/>
                                    <!-- Karın -->
                                    <ellipse cx="70" cy="100" rx="22" ry="12" fill="#fff"/>
                                    <!-- Kafa -->
                                    <ellipse class="sarman-head" cx="60" cy="55" rx="28" ry="26" fill="#f6a04d" stroke="#e38b3c" stroke-width="3"/>
                                    <!-- Kulaklar (animasyonlu) -->
                                    <polygon class="sarman-ear sarman-ear-left" points="35,35 50,10 60,38" fill="#f6a04d" stroke="#e38b3c" stroke-width="3"/>
                                    <polygon class="sarman-ear sarman-ear-right" points="85,35 70,10 60,38" fill="#f6a04d" stroke="#e38b3c" stroke-width="3"/>
                                    <!-- İç kulak -->
                                    <polygon points="50,20 55,30 60,38" fill="#fff3e0"/>
                                    <polygon points="70,20 65,30 60,38" fill="#fff3e0"/>
                                    <!-- Gözler (animasyonlu) -->
                                    <ellipse class="sarman-eye sarman-eye-left" cx="52" cy="60" rx="4" ry="7" fill="#fff"/>
                                    <ellipse class="sarman-eye sarman-eye-right" cx="68" cy="60" rx="4" ry="7" fill="#fff"/>
                                    <ellipse class="sarman-pupil sarman-pupil-left" cx="52" cy="62" rx="1.2" ry="2.2" fill="#333"/>
                                    <ellipse class="sarman-pupil sarman-pupil-right" cx="68" cy="62" rx="1.2" ry="2.2" fill="#333"/>
                                    <!-- Burun -->
                                    <ellipse cx="60" cy="72" rx="2.5" ry="1.5" fill="#e38b3c"/>
                                    <!-- Ağız -->
                                    <path d="M58 75 Q60 78 62 75" stroke="#333" stroke-width="2" fill="none"/>
                                    <!-- Bıyıklar -->
                                    <path d="M45 72 Q35 74 45 76" stroke="#e38b3c" stroke-width="2" fill="none"/>
                                    <path d="M75 72 Q85 74 75 76" stroke="#e38b3c" stroke-width="2" fill="none"/>
                                    <!-- Sarman çizgileri -->
                                    <path d="M50 45 Q48 40 55 38" stroke="#e38b3c" stroke-width="2" fill="none"/>
                                    <path d="M70 45 Q72 40 65 38" stroke="#e38b3c" stroke-width="2" fill="none"/>
                                </svg>
                            </div>
                            <div>
                                <div class="ai-name">CatmatchAI</div>
                                <div class="ai-status">Çevrimiçi</div>
                            </div>
                        </div>
                        
                        <div class="ai-chat-messages">
                            <div class="ai-message ai">
                                Merhaba! Ben CatmatchAI. Quiz sırasında size yardım etmek için buradayım. Herhangi bir sorunuz varsa sorabilirsiniz! 😊
                            </div>
                            <div class="ai-message user">
                                Quiz nasıl çalışıyor?
                            </div>
                            <div class="ai-message ai">
                                Quiz sistemimiz çok basit! Soruları okuyup doğru cevabı seçmeniz yeterli. Size konfeti ve yıldızlarla güzel animasyonlar göstereceğiz! 🌟
                            </div>
                        </div>
                        
                        <div class="ai-chat-input">
                            <input type="text" placeholder="Mesajınızı yazın..." id="aiChatInput">
                            <button id="aiChatSend">Gönder</button>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Quiz Results Container -->
            <div class="quiz-results-container" style="display: none;">
                <div class="quiz-results">
                    <div class="results-header">
                        <h2 class="results-title">Quiz Tamamlandı!</h2>
                        <p class="results-subtitle">Sonuçlarınızı görüntüleyin</p>
                    </div>
                    <div class="score-display">
                        <div class="score-circle">
                            <div class="score-percentage">0%</div>
                        </div>
                        <div class="score-text">Puanınız</div>
                        <div class="score-details">0 / 0 doğru</div>
                    </div>
                    <div class="results-stats"></div>
                    <div class="results-feedback"></div>
                    <div class="results-actions"></div>
                </div>
            </div>

            <!-- Loading State Container -->
            <div class="quiz-loading-container" style="display: none;">
                <div class="quiz-loading">
                    <div class="loading-spinner"></div>
                </div>
            </div>
        </div>
        <!-- Sağ alt köşe detaylı hareketli kedi ve ödül/kılçık alanı -->
        <div class="corner-cat-container">
            <div class="cat-rewards cat-rewards-top"></div>
            <svg class="corner-cat-detailed" viewBox="0 0 180 180" width="140" height="140" xmlns="http://www.w3.org/2000/svg">
                <!-- Kuyruk (animasyonlu) -->
                <g class="cat-tail-group">
                    <path d="M40 140 Q20 120 50 110 Q80 100 90 130 Q100 160 70 150" fill="#f6a04d" stroke="#e38b3c" stroke-width="4"/>
                    <ellipse cx="65" cy="148" rx="10" ry="6" fill="#fff"/>
                </g>
                <!-- Gövde ve baş (zıplama için animasyonlu) -->
                <g class="cat-body-group">
                    <!-- Gövde -->
                    <ellipse cx="100" cy="120" rx="45" ry="38" fill="#f6a04d" stroke="#e38b3c" stroke-width="4"/>
                    <ellipse cx="100" cy="145" rx="25" ry="15" fill="#fff"/>
                    <!-- Kafa -->
                    <ellipse cx="100" cy="70" rx="38" ry="36" fill="#f6a04d" stroke="#e38b3c" stroke-width="4"/>
                    <!-- Kulaklar (animasyonlu) -->
                    <g class="cat-ears-group">
                        <polygon points="70,40 60,10 95,35" fill="#f6a04d" stroke="#e38b3c" stroke-width="4"/>
                        <polygon points="130,40 140,10 105,35" fill="#f6a04d" stroke="#e38b3c" stroke-width="4"/>
                        <polygon points="65,20 70,35 90,40" fill="#fff3e0"/>
                        <polygon points="135,20 130,35 110,40" fill="#fff3e0"/>
                    </g>
                    <!-- Gözler (animasyonlu) -->
                    <g class="cat-eyes-group">
                        <ellipse cx="88" cy="80" rx="8" ry="13" fill="#fff"/>
                        <ellipse cx="112" cy="80" rx="8" ry="13" fill="#fff"/>
                        <ellipse cx="88" cy="85" rx="3.5" ry="6" fill="#3a2b1a"/>
                        <ellipse cx="112" cy="85" rx="3.5" ry="6" fill="#3a2b1a"/>
                    </g>
                    <!-- Burun ve ağız -->
                    <ellipse cx="100" cy="98" rx="4" ry="2.5" fill="#e38b3c"/>
                    <path d="M98 102 Q100 106 102 102" stroke="#3a2b1a" stroke-width="2" fill="none"/>
                    <!-- Yanaklar ve bıyıklar -->
                    <ellipse cx="80" cy="95" rx="6" ry="3" fill="#fff"/>
                    <ellipse cx="120" cy="95" rx="6" ry="3" fill="#fff"/>
                    <path d="M75 95 Q60 100 75 105" stroke="#e38b3c" stroke-width="2" fill="none"/>
                    <path d="M125 95 Q140 100 125 105" stroke="#e38b3c" stroke-width="2" fill="none"/>
                    <!-- Patiler -->
                    <ellipse cx="80" cy="155" rx="10" ry="7" fill="#fff"/>
                    <ellipse cx="120" cy="155" rx="10" ry="7" fill="#fff"/>
                    <!-- Sarman çizgileri -->
                    <path d="M85 60 Q80 55 95 50" stroke="#e38b3c" stroke-width="3" fill="none"/>
                    <path d="M115 60 Q120 55 105 50" stroke="#e38b3c" stroke-width="3" fill="none"/>
                </g>
            </svg>
        </div>
    </div>

    <!-- Quiz JavaScript Modules -->
    <!-- Load modules in order -->
    <script src="{{ url_for('static', filename='js/quiz/quiz-header.js') }}"></script>
    <script src="{{ url_for('static', filename='js/quiz/quiz-question.js') }}"></script>
    <script src="{{ url_for('static', filename='js/quiz/quiz-options.js') }}"></script>
    <script src="{{ url_for('static', filename='js/quiz/quiz-controls.js') }}"></script>
    <script src="{{ url_for('static', filename='js/quiz/quiz-results.js') }}"></script>
    
    <!-- Main Quiz App -->
    <script src="{{ url_for('static', filename='js/quiz/quiz.js') }}"></script>
</body>
</html>